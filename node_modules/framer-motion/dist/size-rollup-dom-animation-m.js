import*as t from"react";import{createContext as n,useContext as e,useLayoutEffect as r,useEffect as a,useRef as o,useInsertionEffect as i,useCallback as s,useMemo as u,forwardRef as l,createElement as c}from"react";import{i as m,P as f,a as d,b as p,c as g,f as y,g as v,S as h,L as S,d as E,e as b,h as A,j as V,k as w,l as x,r as M,m as C,n as P,o as T,s as W,p as L,q as j}from"./size-rollup-dom-max-assets.js";const D=n({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),F=n({});const B=m?r:a,H=n({strict:!1});function O(t,n,r,s){const u=e(F).visualElement,l=e(H),c=e(f),m=e(D).reducedMotion,d=o();s=s||l.renderer,!d.current&&s&&(d.current=s(t,{visualState:n,parent:u,props:r,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:m}));const p=d.current;i(()=>{p&&p.update(r,c)}),B(()=>{p&&p.render()}),a(()=>{p&&p.updateFeatures()});return(window.HandoffAppearAnimations?B:a)(()=>{p&&p.animationState&&p.animationState.animateChanges()}),p}function R(t){const{initial:n,animate:r}=function(t,n){if(p(t)){const{initial:n,animate:e}=t;return{initial:!1===n||g(n)?n:void 0,animate:g(e)?e:void 0}}return!1!==t.inherit?n:{}}(t,e(F));return u(()=>({initial:n,animate:r}),[k(n),k(r)])}function k(t){return Array.isArray(t)?t.join(" "):t}function I(t){const n=o(null);return null===n.current&&(n.current=t()),n.current}let U=1;const q=Symbol.for("motionComponentSymbol");function _({preloadedFeatures:n,createVisualElement:r,useRender:a,useVisualState:o,Component:i}){n&&function(t){for(const n in t)y[n]={...y[n],...t[n]}}(n);const u=l((function(u,l){let c;const f={...e(D),...u,layoutId:z(u)},{isStatic:p}=f,g=R(u),y=p?void 0:I(()=>{if(v.hasEverUpdated)return U++}),S=o(u,p);if(!p&&m){g.visualElement=O(i,S,f,r);const t=e(h),a=e(H).strict;g.visualElement&&(c=g.visualElement.loadFeatures(f,a,n,y,t))}return t.createElement(F.Provider,{value:g},c&&g.visualElement?t.createElement(c,{visualElement:g.visualElement,...f}):null,a(i,u,y,function(t,n,e){return s(r=>{r&&t.mount&&t.mount(r),n&&(r?n.mount(r):n.unmount()),e&&("function"==typeof e?e(r):d(e)&&(e.current=r))},[n])}(S,g.visualElement,l),S,p,g.visualElement))}));return u[q]=i,u}function z({layoutId:t}){const n=e(S).id;return n&&void 0!==t?n+"-"+t:t}const N=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function X(t,n,e){for(const r in n)E(n[r])||b(r,e)||(t[r]=n[r])}function Y(t,n,e){const r={};return X(r,t.style||{},t),Object.assign(r,function({transformTemplate:t},n,e){return u(()=>{const r={style:{},transform:{},transformOrigin:{},vars:{}};return A(r,n,{enableHardwareAcceleration:!e},t),Object.assign({},r.vars,r.style)},[n])}(t,n,e)),t.transformValues?t.transformValues(r):r}function G(t,n,e){const r={},a=Y(t,n,e);return t.drag&&!1!==t.dragListener&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=a,r}const J=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function K(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||J.has(t)}let Q=t=>!K(t);try{(Z=require("@emotion/is-prop-valid").default)&&(Q=t=>t.startsWith("on")?!K(t):Z(t))}catch(t){}var Z;const $=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}});function tt(t,n,e,r){const a=u(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return V(e,n,{enableHardwareAcceleration:!1},w(r),t.transformTemplate),{...e.attrs,style:{...e.style}}},[n]);if(t.style){const n={};X(n,t.style,t),a.style={...n,...a.style}}return a}function nt(t=!1){return(n,e,r,a,{latestValues:o},i)=>{const s=(x(n)?tt:G)(e,o,i,n),l={...function(t,n,e){const r={};for(const a in t)"values"===a&&"object"==typeof t.values||(Q(a)||!0===e&&K(a)||!n&&!K(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}(e,"string"==typeof n,t),...s,ref:a},{children:m}=e,f=u(()=>E(m)?m.get():m,[m]);return r&&(l["data-projection-id"]=r),c(n,{...l,children:f})}}const et=t=>(n,r)=>{const a=e(F),o=e(f),i=()=>function({scrapeMotionValuesFromProps:t,createRenderState:n,onMount:e},r,a,o){const i={latestValues:rt(r,a,o,t),renderState:n()};return e&&(i.mount=t=>e(r,t,i)),i}(t,n,a,o);return r?i():I(i)};function rt(t,n,e,r){const a={},o=r(t,{});for(const t in o)a[t]=M(o[t]);let{initial:i,animate:s}=t;const u=p(t),l=C(t);n&&l&&!u&&!1!==t.inherit&&(void 0===i&&(i=n.initial),void 0===s&&(s=n.animate));let c=!!e&&!1===e.initial;c=c||!1===i;const m=c?s:i;if(m&&"boolean"!=typeof m&&!P(m)){(Array.isArray(m)?m:[m]).forEach(n=>{const e=T(t,n);if(!e)return;const{transitionEnd:r,transition:o,...i}=e;for(const t in i){let n=i[t];if(Array.isArray(n)){n=n[c?n.length-1:0]}null!==n&&(a[t]=n)}for(const t in r)a[t]=r[t]})}return a}const at={useVisualState:et({scrapeMotionValuesFromProps:W,createRenderState:$,onMount:(t,n,{renderState:e,latestValues:r})=>{try{e.dimensions="function"==typeof n.getBBox?n.getBBox():n.getBoundingClientRect()}catch(t){e.dimensions={x:0,y:0,width:0,height:0}}V(e,r,{enableHardwareAcceleration:!1},w(n.tagName),t.transformTemplate),L(n,e)}})},ot={useVisualState:et({scrapeMotionValuesFromProps:j,createRenderState:N})};const it=function(t){function n(n,e={}){return _(t(n,e))}if("undefined"==typeof Proxy)return n;const e=new Map;return new Proxy(n,{get:(t,r)=>(e.has(r)||e.set(r,n(r)),e.get(r))})}((function(t,{forwardMotionProps:n=!1},e,r){return{...x(t)?at:ot,preloadedFeatures:e,useRender:nt(n),createVisualElement:r,Component:t}}));export{it as m};
